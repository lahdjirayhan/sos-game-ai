(this["webpackJsonpfirst-spa"]=this["webpackJsonpfirst-spa"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(11),c=n.n(a),o=(n(18),n(19),n(0));var i=function(){return Object(o.jsx)("div",{className:"header"})},l=n(6),u=n(2),h=n.n(u),d=n(8),p=n(3),f=n(4),v=n(7),j=n(5),m=n(12);n(22);var b=function(e){return Object(o.jsx)("button",{onClick:e.onClick,className:e.className,children:e.text})},O=(n(23),n(13)),g=n.n(O);function k(e){var t="Your score: "+e.playerScore.toString(),n="Enemy score: "+e.enemyScore.toString();return Object(o.jsxs)("div",{className:"scoreboard",children:[Object(o.jsx)("p",{children:t}),Object(o.jsx)("p",{children:n})]})}function S(e){var t="square "+e.className;return Object(o.jsx)("button",{className:t,onClick:e.onClick,children:e.value})}var y=function(e){Object(v.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={size:Math.sqrt(e.squares.length)},r}return Object(f.a)(n,[{key:"renderSquare",value:function(e){var t=this;return Object(o.jsx)(S,{value:this.props.squares[e],className:"c"+e.toString(),onClick:function(){return t.props.onClick(e)}})}},{key:"renderRow",value:function(e){for(var t=[],n=e*this.state.size;n<(e+1)*this.state.size;n++)t.push(this.renderSquare(n));return Object(o.jsx)("div",{className:"board-row",children:t})}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.size;t++)e.push(this.renderRow(t));var n=[];return this.props.lines.forEach((function(e){var t=Object(l.a)(e.startEnd,2),r=t[0],s=t[1];r="c"+r,s="c"+s;var a=e.color;n.push(Object(o.jsx)(g.a,{from:r,to:s,fromAnchor:"center center",toAnchor:"center center",zIndex:1,borderColor:a,borderSize:"10px",borderStyle:"solid"}))})),Object(o.jsxs)("div",{className:"board",children:[e,n]})}}]),n}(s.a.Component),x=function(e){Object(v.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(p.a)(this,n),t.call(this,e)}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t="button-so"+("S"===this.props.selectedMarker?" button-so-selected":""),n="button-so"+("O"===this.props.selectedMarker?" button-so-selected":"");return Object(o.jsxs)("div",{className:"game",children:[Object(o.jsx)(y,{squares:this.props.squares,onClick:function(t){return e.props.handleClick(t)},lines:this.props.lines}),Object(o.jsxs)("div",{className:"button-so-container",children:[Object(o.jsx)(b,{className:t,onClick:function(){return e.props.handleClickOnS()},text:"S"}),Object(o.jsx)(b,{className:n,onClick:function(){return e.props.handleClickOnO()},text:"O"})]})]})}}]),n}(s.a.Component),C=function(e){Object(v.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(p.a)(this,n),t.call(this,e)}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return this.props.gameInProgress?"There is a game in progress.":"There is NO game in progress.",Object(o.jsxs)("div",{className:"game-container",children:[Object(o.jsx)(x,{gameInProgress:this.props.gameInProgress,squares:this.props.squares,handleClick:function(t){return e.props.handleClick(t)},handleClickOnS:function(){return e.props.handleClickOnS()},handleClickOnO:function(){return e.props.handleClickOnO()},selectedMarker:this.props.selectedMarker,lines:this.props.lines}),Object(o.jsx)(k,{playerScore:this.props.playerScore,enemyScore:this.props.enemyScore})]})}}]),n}(s.a.Component);n(27);function M(e){return Object(o.jsxs)("select",{id:"model-dropdown",className:"model-dropdown",value:e.selectedValue,onChange:e.onChange,children:[Object(o.jsx)("option",{value:null,disabled:!0,selected:!0,hidden:!0,children:"Please select an enemy"}),e.modelList?e.modelList.map((function(e){return Object(o.jsx)("option",{value:e,children:e})})):null]})}function I(e){return Object(o.jsxs)("select",{id:"turn-dropdown",className:"turn-dropdown",value:e.selectedValue,onChange:e.onChange,children:[Object(o.jsx)("option",{value:"AI",children:"AI moves first"}),Object(o.jsx)("option",{value:"player",children:"I move first"})]})}var N=function(e){var t;return t=e.gameInProgress?Object(o.jsx)(b,{onClick:e.stopGame,className:"start-resign-button",text:"RESIGN"}):Object(o.jsx)(b,{onClick:e.startGame,className:"start-resign-button",text:"START"}),Object(o.jsxs)("div",{className:"control",children:[Object(o.jsx)(I,{selectedValue:e.selectedValueTurn,onChange:e.onChangeTurn}),Object(o.jsx)(M,{selectedValue:e.selectedValueModel,onChange:e.onChangeModel,modelList:e.modelList}),t]})};function P(e){for(var t=[],n=0,r=["S","O"];n<r.length;n++){var s,a=r[n],c=Object(m.a)(e);try{for(c.s();!(s=c.n()).done;){var o=s.value;t.push(o===a?1:0)}}catch(i){c.e(i)}finally{c.f()}}return t}function q(e){return[Math.floor(e/2),e%2]}function A(e,t){if(null===e[t])return 0;var n=Math.sqrt(e.length),r=Math.floor(t/n),s=t%n,a=[],c=-n,o=n,i=1+c,l=-1+c,u=1+o,h=-1+o;if("S"===e[t]){var d=function(e,t){return[e,e+t,e+2*t]},p=s>1,f=r>1,v=r<n-2;s<n-2&&(a.push(d(t,1)),f&&a.push(d(t,i)),v&&a.push(d(t,u))),p&&(a.push(d(t,-1)),f&&a.push(d(t,l)),v&&a.push(d(t,h))),f&&a.push(d(t,c)),v&&a.push(d(t,o))}else{if("O"!==e[t])return void console.log("The given squares[loc] does not contain either S or O. Check.");var j=function(e,t){return[e-t,e,e+t]},m=0<r&&r<n-1,b=n;0<s&&s<n-1&&(a.push(j(t,1)),m&&(a.push(j(t,1+b)),a.push(j(t,-1+b)))),m&&a.push(j(t,b))}var O=0,g=[];return a.forEach((function(t){"SOS"===t.map((function(t){return e[t]})).join("")&&(O++,g.push([t[0],t[t.length-1]]))})),[O,g]}var w=function(e){Object(v.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={gameInProgress:!1,squares:Array(25).fill(null),selectedMarker:null,playerScore:0,enemyScore:0,lines:[],playerLineColor:"blue",enemyLineColor:"red",activeModelID:null,listModelID:null,enemyMovesFirst:!1},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/list").then((function(e){return e.json()})).then((function(e){return e.model_ids})).then((function(t){return e.setState({listModelID:t})})).catch((function(e){return console.error(e)}))}},{key:"fetchActionPromise",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/predict",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({state:P(this.state.squares),model_id:this.state.activeModelID})});case 2:return t=e.sent,e.prev=3,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n.action);case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"makeMoveAI",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,n,r,s,a,c,o,i,u,d,p,f,v=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.gameInProgress){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.fetchActionPromise();case 4:if(t=e.sent,n=q(t),r=Object(l.a)(n,2),s=r[0],a=r[1],console.log(s,a),(c=this.state.squares)[s]&&console.error("AI MOVES ILLEGALLY!"),c[s]=0===a?"S":"O",o=A(c,s),i=Object(l.a)(o,2),u=i[0],d=i[1],p=this.state.enemyScore+u,f=this.state.lines,d.forEach((function(e){f.push({startEnd:e,color:v.state.enemyLineColor})})),this.setState({squares:c,enemyScore:p,lines:f}),c.filter((function(e){return e})).length===c.length&&this.setState({gameInProgress:!1}),!(u>0)){e.next=19;break}return e.next=19,this.makeMoveAI();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var n,r,s,a,c,o,i,u=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.gameInProgress&&null!==this.state.selectedMarker){e.next=2;break}return e.abrupt("return");case 2:if(null===(n=this.state.squares)[t]){e.next=5;break}return e.abrupt("return");case 5:if(n[t]=this.state.selectedMarker,r=A(n,t),s=Object(l.a)(r,2),a=s[0],c=s[1],o=this.state.playerScore+a,i=this.state.lines,c.forEach((function(e){i.push({startEnd:e,color:u.state.playerLineColor})})),this.setState({squares:n,playerScore:o,lines:i,selectedMarker:null}),n.filter((function(e){return e})).length!==n.length){e.next=14;break}return this.setState({gameInProgress:!1}),e.abrupt("return");case 14:if(0!==a){e.next=17;break}return e.next=17,this.makeMoveAI();case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleClickOnS",value:function(){this.state.gameInProgress&&this.setState({selectedMarker:"S"!==this.state.selectedMarker?"S":null})}},{key:"handleClickOnO",value:function(){this.state.gameInProgress&&this.setState({selectedMarker:"O"!==this.state.selectedMarker?"O":null})}},{key:"handleModelSelectionChange",value:function(e){this.setState({activeModelID:e.target.value})}},{key:"handleTurnSelectionChange",value:function(e){if(!this.state.gameInProgress){var t=e.target.value;console.log(t),"player"===t?this.setState({enemyMovesFirst:!1}):"AI"===t&&this.setState({enemyMovesFirst:!0})}}},{key:"startGame",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.activeModelID){e.next=2;break}return e.abrupt("return");case 2:this.setState({squares:Array(25).fill(null),gameInProgress:!0,selectedMarker:null,playerScore:0,enemyScore:0,lines:[]},(function(){t.state.enemyMovesFirst&&t.makeMoveAI()}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"endGame",value:function(){this.setState({gameInProgress:!1,selectedMarker:null})}},{key:"render",value:function(){var e=this;return Object(o.jsxs)("div",{className:"main",children:[Object(o.jsx)(C,{gameInProgress:this.state.gameInProgress,squares:this.state.squares,selectedMarker:this.state.selectedMarker,playerScore:this.state.playerScore,enemyScore:this.state.enemyScore,handleClick:function(t){return e.handleClick(t)},handleClickOnS:function(){return e.handleClickOnS()},handleClickOnO:function(){return e.handleClickOnO()},lines:this.state.lines}),Object(o.jsx)(N,{gameInProgress:this.state.gameInProgress,startGame:function(){return e.startGame()},stopGame:function(){return e.endGame()},selectedValueModel:this.state.activeModelID,onChangeModel:function(t){return e.handleModelSelectionChange(t)},modelList:this.state.listModelID,onChangeTurn:function(t){return e.handleTurnSelectionChange(t)},selectedValueTurn:this.state.enemyMovesFirst?"AI":"player"})]})}}]),n}(s.a.Component),L=w;n(28);var T=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(i,{}),Object(o.jsx)(L,{})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};c.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(T,{})}),document.getElementById("root")),E()}},[[29,1,2]]]);
//# sourceMappingURL=main.95f64c09.chunk.js.map